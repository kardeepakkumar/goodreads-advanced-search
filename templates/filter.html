<h2>Filter Books</h2>
<form method="get">
    <label>Genres:</label><br>
    <div class="genre-container">
        {% for genre in all_genres %}
            <div class="genre-item">
                <input type="checkbox" name="genres" value="{{ genre }}"
                       {% if genre in selected_genres %}checked{% endif %}>
                {{ genre }}
            </div>
        {% endfor %}
    </div>
    <br><br>
    <label>Minimum Ratings:</label>
    <input type="number" name="min_ratings" value="{{ min_ratings }}" min="0">
    <br><br>
    <button type="submit">Apply Filters</button>
</form>

<div class="mt-4">
    <p>Total Books: <span id="totalBooks">{{total_books_count}}</span></p>
    <p>Filtered Books: {{ filtered_books_count }}</p>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Avg Rating</th>
                <th>Num Ratings</th>
                <th>Genres</th>
            </tr>
        </thead>
        <tbody id="booksTableBody">
            {% for book in books %}
                <tr>
                    <td><a href="{{ book['Link'] }}" target="_blank">{{ book['Title'] }}</a></td>
                    <td>{{ book['Author'] }}</td>
                    <td>{{ book['Avg Rating'] }}</td>
                    <td>{{ book['Num Ratings'] }}</td>
                    <td>{{ book['Genres'] | join(', ') }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center" id="pagination"></ul>
    </nav>
</div>
